/**
 * åœ¨çµå¸³é é¢ä¸Šæ–¹åŠ å…¥ LINE ç™»å…¥æç¤ºæ¡†
 * åªå°è¨ªå®¢é¡¯ç¤º,å·²ç™»å…¥ç”¨æˆ¶ä¸æœƒçœ‹åˆ°
 * ç‰ˆæœ¬ 1.3 - æ‰‹æ©Ÿç‰ˆå­—é«”åŠ å¤§ä¸€å€‹ç´šè·
 */

add_action( 'woocommerce_before_checkout_form', 'bcongee_line_login_notice_top', 5 );

function bcongee_line_login_notice_top() {
    
    // å¦‚æœå·²ç™»å…¥å°±ä¸é¡¯ç¤º
    if ( is_user_logged_in() ) {
        return;
    }
    
    ?>
    <div class="bcongee-line-notice-top" style="background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); 
                padding: 20px 22px; 
                border-left: 5px solid #27AE60; 
                border-radius: 10px;
                margin-bottom: 25px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.08);">
        
        <div style="display: flex; align-items: flex-start; gap: 15px;">
            <span style="font-size: 32px; line-height: 1; flex-shrink: 0;">ğŸ’¬</span>
            
            <div style="flex: 1;">
                <div style="color: #1f2d3d; font-size: 19px; font-weight: bold; margin-bottom: 8px;">
                    ğŸ’¡ å»ºè­°æ‚¨ä½¿ç”¨ LINE ç™»å…¥ å†çµå¸³
                </div>
                
                <div style="color: #555; font-size: 16px; line-height: 1.6; margin-bottom: 12px;">
                    å³æ™‚æ”¶åˆ° 
                    <strong style="color: #27AE60;">å‡ºè²¨é€šçŸ¥</strong>ã€
                    <strong style="color: #27AE60;">ç‰©æµè¿½è¹¤</strong>ã€
                    <strong style="color: #27AE60;">é›™å‘è¯çµ¡</strong> 
                    ç­‰é‡è¦è¨Šæ¯
                </div>
                
                <div class="bcongee-benefits" style="padding-top: 12px; 
                           border-top: 1px dashed rgba(39, 174, 96, 0.4);">
                    <div class="bcongee-benefit-item">âœ… å…è¼¸å…¥å¸³è™Ÿå¯†ç¢¼</div>
                    <div class="bcongee-benefit-item">âœ… å¿«é€Ÿå®Œæˆçµå¸³</div>
                    <div class="bcongee-benefit-item">âœ… æœ‰å•é¡Œç›´æ¥å›è¦† LINE è¯çµ¡å®¢æœ</div>
                </div>
            </div>
        </div>
    </div>
    
    <style>
    /* å¥½è™•åˆ—è¡¨å®¹å™¨ */
    .bcongee-benefits {
        display: flex !important;
        flex-wrap: wrap !important;
        gap: 8px 20px !important;
        align-items: center !important;
    }
    
    /* æ¯å€‹å¥½è™•é …ç›® - æ¡Œé¢ç‰ˆåŠ å¤§ */
    .bcongee-benefit-item {
        font-size: 15px !important; /* åŠ å¤§ï¼åŸæœ¬ 14px */
        color: #333 !important; /* æ·±è‰²æ›´æ¸…æ¥š */
        font-weight: 500 !important;
        line-height: 1.5 !important;
        flex: 0 0 auto !important;
        display: inline-block !important;
        margin: 0 !important;
        padding: 0 !important;
        width: auto !important;
        max-width: none !important;
    }
    
    /* é˜²æ­¢ä¸»é¡Œè¦†è“‹ç¬¬ä¸€å€‹å…ƒç´  */
    .bcongee-benefit-item:first-child,
    .bcongee-benefit-item:nth-child(1) {
        font-size: 15px !important; /* åŠ å¤§ï¼ */
        font-weight: 500 !important;
        flex: 0 0 auto !important;
    }
    
    /* æ‰‹æ©Ÿç‰ˆå„ªåŒ– - å­—é«”å¤§å¹…åŠ å¤§ */
    @media (max-width: 768px) {
        .bcongee-line-notice-top {
            padding: 16px 18px !important;
            margin-bottom: 20px !important;
        }
        
        .bcongee-line-notice-top > div {
            flex-direction: column !important;
            gap: 10px !important;
        }
        
        /* Emoji ä¸è®Š */
        .bcongee-line-notice-top > div > span:first-child {
            font-size: 28px !important;
        }
        
        /* æ¨™é¡ŒåŠ å¤§ */
        .bcongee-line-notice-top > div > div:nth-child(2) > div:nth-child(1) {
            font-size: 19px !important; /* åŠ å¤§ï¼åŸæœ¬ 17px */
            margin-bottom: 8px !important;
        }
        
        /* èªªæ˜æ–‡å­—åŠ å¤§ */
        .bcongee-line-notice-top > div > div:nth-child(2) > div:nth-child(2) {
            font-size: 16px !important; /* åŠ å¤§ï¼åŸæœ¬ 15px */
            line-height: 1.6 !important;
            margin-bottom: 12px !important;
        }
        
        .bcongee-benefits {
            gap: 6px 15px !important;
        }
        
        /* å¥½è™•é …ç›® - æ‰‹æ©Ÿç‰ˆåŠ å¤§ */
        .bcongee-benefit-item {
            font-size: 16px !important; /* åŠ å¤§ï¼åŸæœ¬ 14px */
            font-weight: 600 !important;
            color: #1f2d3d !important;
        }
        
        /* æ‰‹æ©Ÿç‰ˆä¹Ÿå¼·åˆ¶çµ±ä¸€ç¬¬ä¸€å€‹å…ƒç´  */
        .bcongee-benefit-item:first-child,
        .bcongee-benefit-item:nth-child(1) {
            font-size: 16px !important; /* åŠ å¤§ï¼ */
        }
    }
    </style>
    <?php
}
